<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CANALES 3</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #111;
            color: white;
            height: 100vh;
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotate(0deg); /* Asegura que se mantenga en horizontal */
        }
        #video {
            width: 100%;
            height: 100vh;
            object-fit: cover;
            pointer-events: none; /* Desactiva la interacción con el reproductor */
            opacity: 1; /* Mantiene el video visible */
        }
        #fullscreen-button {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200; /* Asegura que esté por encima del video */
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 40px;
            height: 40px;
            background-size: cover;
        }
        #fullscreen-button:hover {
            background-color: rgba(0, 0, 0, 0.9);
        }
        .icon-expand {
            --icon-url: url(https://davinci.zappingtv.com/static/app-icons/white/expand.svg);
            background-image: var(--icon-url);
            background-size: contain;
            background-repeat: no-repeat;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<video id="video" autoplay></video>
<button id="fullscreen-button" class="icon-expand"></button>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
    const video = document.getElementById('video');
    const fullscreenButton = document.getElementById('fullscreen-button');

    // Array de transmisiones
    const streams = [
        'https://dai.google.com/linear/hls/pa/event/bFL1IVq9RNGlWQaqgiFuNw/stream/33a3e30e-8485-4bdf-a6db-adfb0d4e7084:SCL/master.m3u8',
        "https://cl-a2-i-e-cl1.cdn.mdstrm.com/live-stream-gdai/linear/hls/pa/event/V1j9hgJXRtKjBeFfx3xzFQ/stream/4302d283-2f02-49fd-8551-e8b910cf73cb:TUL/master.m3u8?aid=598861d8cc3c169b2236f987&uid=YhzdXB4PZgJXftc8gURXBoVixxuTiB91&sid=pglKXQFIAeULjgu8eocNNIfyNxYzNk1y&pid=uTmEtLmg92gcKRiwHFfuy5RKDUE72FFN&ref=https%3A%2F%2Fwww.chilevision.cl%2F&without_cookies=false&listenerid=&dnt=true&access_token=tEuwzb0so1n42lovPRudaVv1bFC9n2oj8KQMBuTKWRHrROMZoHUzYFc1PoXXcZpG9RinhRMjVka&adInsertionGoogleStreamId=4302d283-2f02-49fd-8551-e8b910cf73cb%3ATUL&es=cl-a2-i-e-cl1.cdn.mdstrm.com&ote=1744134705855&ot=nWAqHRqr0B7uqa4FPC1DuA&proto=https&pz=cl",
        "https://cl-a2-i-e-cl1.cdn.mdstrm.com/live-stream-gdai/linear/hls/pa/event/TdvXGBreTYyJZiwX63BRIA/stream/036735f0-f149-4011-9c36-3d1e21eb0265:DLS/master.m3u8?aid=53bc2bcae41e2d9c662e1ba7&uid=YhzdXB4PZgJXftc8gURXBoVixxuTiB91&sid=pglKXQFIAeULjgu8eocNNIfyNxYzNk1y&pid=r1KjKw4VUSp3vWsA178N7YLruC2HoCWg&ref=https%3A%2F%2Fwww.meganoticias.cl%2F&without_cookies=false&listenerid=&dnt=true&access_token=XxgKmgzOdKCJIejKNnfN9l09jc1g7d7EiApWBbJETR3oiWCpFdZS80dU8zDmMMKqXMxKpCSYseJ&adInsertionGoogleStreamId=036735f0-f149-4011-9c36-3d1e21eb0265%3ADLS&es=cl-a2-i-e-cl1.cdn.mdstrm.com&ote=1744134882977&ot=mEpleTsfdeJBwyw1309ZOQ&proto=https&pz=cl",
        "https://c2nvdxq.fubohd.com/espnpremium/2025/04/07/18/04/38-06006.ts?token=bc0d0eb75c6eafdf4d4d54f2f5960efa798bddff-e-1744084175-1744048175",
        "https://deportes.slkdhfdhldeportes.com:8080/MTkwLjIxNy4xOTMuMTY0/16_.m3u8?token=pGj0241B2t22WvE0hemjTQ&expires=1744056353",
    ]
    let currentStreamIndex = 0;

    // Función para cargar el stream
    function loadStream(url) {
        if (Hls.isSupported()) {
            const hls = new Hls();
            hls.loadSource(url);
            hls.attachMedia(video);
            hls.on(Hls.Events.MANIFEST_PARSED, function () {
                video.play();
            });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = url;
            video.play();
        }
    }

    // Cargar la primera transmisión por defecto
    loadStream(streams[currentStreamIndex]);

    // Función para poner el video en pantalla completa
    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            video.requestFullscreen().catch(err => {
                console.error(`Error al intentar ingresar a pantalla completa: ${err.message}`);
            });
        } else {
            document.exitFullscreen();
        }
    }

    // Al hacer clic en el ícono de pantalla completa
    fullscreenButton.addEventListener('click', toggleFullscreen);

    // Detectar cuando entra en pantalla completa para ocultar el botón
    document.addEventListener('fullscreenchange', function () {
        if (document.fullscreenElement) {
            fullscreenButton.style.display = 'none';
        } else {
            fullscreenButton.style.display = 'block';
        }
    });

    // Detectar la flecha hacia abajo para cambiar la transmisión (en dispositivos de escritorio)
    document.addEventListener('keydown', function (event) {
        if (event.key === 'ArrowDown') {
            // Cambiar al siguiente stream (flecha hacia abajo)
            currentStreamIndex = (currentStreamIndex + 1) % streams.length;
            loadStream(streams[currentStreamIndex]);
        }

        // Detectar la flecha hacia arriba para cambiar al stream anterior (en dispositivos de escritorio)
        if (event.key === 'ArrowUp') {
            // Cambiar al stream anterior (flecha hacia arriba)
            currentStreamIndex = (currentStreamIndex - 1 + streams.length) % streams.length;
            loadStream(streams[currentStreamIndex]);
        }
    });

    // Detectar el deslizamiento táctil en dispositivos móviles (para cambio de stream)
    let touchStartY = 0;
    let touchEndY = 0;

    document.addEventListener('touchstart', function (event) {
        touchStartY = event.touches[0].clientY;
    });

    document.addEventListener('touchend', function (event) {
        touchEndY = event.changedTouches[0].clientY;
        if (touchStartY - touchEndY > 150) {
            currentStreamIndex = (currentStreamIndex + 1) % streams.length;
            loadStream(streams[currentStreamIndex]);
        }
        if (touchEndY - touchStartY > 150) {
            currentStreamIndex = (currentStreamIndex - 1 + streams.length) % streams.length;
            loadStream(streams[currentStreamIndex]);
        }
    });
</script>
</body>
</html>
